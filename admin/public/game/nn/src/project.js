window.__require=function e(t,i,n){function a(c,s){if(!i[c]){if(!t[c]){var r=c.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+c+"'")}}var u=i[c]={exports:{}};t[c][0].call(u.exports,function(e){return a(t[c][1][e]||e)},u,u.exports,e,t,i,n)}return i[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<n.length;c++)a(n[c]);return a}({Alert:[function(e,t,i){"use strict";cc._RF.push(t,"588fbn0WshPn7r+mDdfxrLe","Alert"),cc.Class({extends:cc.Component,properties:{_btnOK:null,_btnCancle:null,_content:null,_closeBtn:null,_onok:null,_oncancel:null},onLoad:function(){this._btnOK=this.node.getChildByName("btnEnable"),this._btnCancle=this.node.getChildByName("btnCancel"),this._content=this.node.getChildByName("content").getComponent(cc.Label),this._closeBtn=this.node.getChildByName("clostBtn")},OnOkClick:function(e){this._onok&&this._onok(),this.node.removeFromParent()},OnCancleClick:function(e){this._oncancel&&this._oncancel(),this.node.removeFromParent()},OnCloseClick:function(e){this._onok&&this._onok(),this.node.removeFromParent()},show:function(e,t,i){this._onok=t,this._content.string=e+"",1==i||(this._btnCancle.active=!1,this._btnOK.x=350)},show2:function(e,t,i,n,a,o){this._onok=t,this._oncancel=i,this._content.string=e+"",console.log("showcancelbtn status "+n),""!=a&&(this._btnOK.getChildByName("Label").getComponent(cc.Label).string=a),""!=o&&(this._btnCancle.getChildByName("Label").getComponent(cc.Label).string=o),1==n?this._closeBtn.active=!1:(this._btnCancle.active=!1,this._btnOK.x=350)}}),cc._RF.pop()},{}],AudioMgr:[function(e,t,i){"use strict";cc._RF.push(t,"04cf8aGJKRKfapqzgpY4b6R","AudioMgr"),cc.Class({extends:cc.Component,properties:{bgmVolume:1,sfxVolume:1,bgmAudioID:-1},init:function(){this.resetLocalAudio(),cc.game.on(cc.game.EVENT_HIDE,function(){cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.audioEngine.resumeAll()})},resetLocalAudio:function(){var e;null!=(e=cc.sys.localStorage.getItem("bgmVolume"))?this.bgmVolume=parseFloat(e):(this.bgmVolume=parseFloat(.2),this.setBGMVolume(.3)),null!=(e=cc.sys.localStorage.getItem("sfxVolume"))?this.sfxVolume=parseFloat(e):(this.sfxVolume=parseFloat(.9),this.setSFXVolume(1))},getUrl:function(e){return cc.url.raw("resources/sounds/"+e)},setSFXVolume:function(e){this.sfxVolume!=e&&(cc.sys.localStorage.setItem("sfxVolume",e),this.sfxVolume=e)},setBGMVolume:function(e){this.bgmAudioID>=0&&(e>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID)),this.bgmVolume!=e&&(cc.sys.localStorage.setItem("bgmVolume",e),this.bgmVolume=e,cc.audioEngine.setVolume(this.bgmAudioID,e))},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()},playBGM:function(e){var t=this.getUrl(e);this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this.bgmVolume>0&&(this.bgmAudioID=cc.audioEngine.play(t,!0,this.bgmVolume))},playSFX:function(e){var t=this.getUrl(e);if(this.sfxVolume>0)cc.audioEngine.play(t,!1,this.sfxVolume)}}),cc._RF.pop()},{}],Card:[function(e,t,i){"use strict";cc._RF.push(t,"70df0jJ2IpMHaLSR+slL8kk","Card"),cc.Class({extends:cc.Component,properties:{card_pos:"",card_node:cc.Node,pokerPrefab:cc.Prefab},onLoad:function(){this._posx=new Array(60,95,130,46,72,96,124,145,50,75,98,125,151),this._posy=new Array(120,125,120,78,82,85,81,73,35,39,42,38,30),this._rotation=new Array(-10,0,10,-25,-10,0,10,20,-25,-10,0,10,20)},ShowCardNormal:function(e){this.card_node.removeAllChildren(),this.card_node.active=!0,this.card_node.setScale(1);var t=20,i=.32;0==e&&(t=20,i=.55);for(var n=0;n<5;n++){var a=cc.instantiate(this.pokerPrefab);a.setScale(i),this.card_node.addChild(a);var o=this.card_node.convertToNodeSpaceAR(cc.v2(350,800));a.setPosition(o),a.setPosition(o.x,o.y);var c=cc.delayTime(.05+.05*n),s=cc.moveTo(.3,cc.v2(n*t-30,-10));a.runAction(cc.sequence(c,s))}},ShowSeflCardResult:function(e,t,i){this.card_node.removeAllChildren(),this.card_node.active=!0;var n=null;if(t>0&&(n=this.getNiuList(e,t)),6==Grobal.playerNum)var a=new Array(-2,48,98,148,198);else a=new Array(-42,8,58,108,158);for(var o=new Array(-42,8,58,178,228),c=0;c<5;c++){var s=cc.instantiate(this.pokerPrefab);s.setScale(.61);var r=e[c];null!==n&&(r=e[n[c]]),s.setPosition(85*c-42,38),null!==n?s.runAction(cc.moveTo(.3,cc.v2(o[c],38))):s.runAction(cc.moveTo(.3,cc.v2(a[c],38))),s.getComponent(cc.Sprite).spriteFrame=Grobal.pokerSpriteFrameMap[r.name],this.card_node.addChild(s)}this.card_node.setScale(.85),cc.vv.uitools.ShowAniNui(t,this.card_node,1)},ShowCardResult:function(e,t,i){this.card_node.removeAllChildren(),this.card_node.active=!0;var n=25,a=null;t>0&&(a=this.getNiuList(e,t));for(var o=0;o<5;o++){var c=cc.instantiate(this.pokerPrefab);c.setScale(.45),3==o&&(n=25),this.card_node.x<0?null!==a?c.setPosition(-39,0):c.setPosition(-24,0):c.setPosition(-50,0),null!==a&&o>=3?c.runAction(cc.moveBy(.5,cc.v2(o*n+20,0))):o>0&&c.runAction(cc.moveBy(.5,cc.v2(o*n,0)));var s=e[o];null!==a&&(s=e[a[o]]),c.getComponent(cc.Sprite).spriteFrame=Grobal.pokerSpriteFrameMap[s.name],this.card_node.addChild(c)}this.card_node.setScale(.65),cc.vv.uitools.ShowAniNui(t,this.card_node)},getNiuList:function(e,t){for(var i=new Array,n=0,a=0,o=0,c=0;c<3;c++)for(var s=c+1;s<5;s++)for(var r=s+1;r<5;r++)(e[c].value+e[s].value+e[r].value)%10==0&&(n=c,a=s,o=r);if(i.push(n),i.push(a),i.push(o),0==n&&0==a&&0==o)return null;for(var l=0;l<5;l++)l!==n&&l!==a&&l!==o&&i.push(l);return i},hideCard:function(){this.card_node.active=!1}}),cc._RF.pop()},{}],ChatList:[function(e,t,i){"use strict";cc._RF.push(t,"0afcbw/czhNNpSSRqusDIpX","ChatList"),cc.Class({extends:cc.Component,properties:{chatVoices:{default:[],type:[cc.Node]},chatNode:cc.Node},onLoad:function(){var e=this;this._quickChatInfo={},this._quickChatInfo.item0={index:0,content:"\u73a9\u6e38\u620f\uff0c\u8bf7\u5148\u8fdb\u7fa4 ",sound:"fix_msg_1.m4a"},this._quickChatInfo.item1={index:1,content:"\u7fa4\u5185\u6e38\u620f\uff0c\u5207\u52ff\u8f6c\u53d1 ",sound:"fix_msg_2.m4a"},this._quickChatInfo.item2={index:2,content:"\u522b\u78e8\u8e6d\uff0c\u5feb\u70b9\u6253\u724c ",sound:"fix_msg_3.m4a"},this._quickChatInfo.item3={index:3,content:"\u6211\u51fa\u53bb\u53eb\u4eba ",sound:"fix_msg_4.m4a"},this._quickChatInfo.item4={index:4,content:"\u4f60\u7684\u724c\u597d\u9753\u54c7 ",sound:"fix_msg_5.m4a"},this._quickChatInfo.item5={index:5,content:"\u6211\u5f53\u5e74\u6a2a\u626b\u6fb3\u95e8\u4e94\u6761\u8857 ",sound:"fix_msg_6.m4a"},this._quickChatInfo.item6={index:6,content:"\u7b97\u4f60\u725b\u903c ",sound:"fix_msg_7.m4a"},this._quickChatInfo.item7={index:7,content:"\u522b\u8ddf\u6211\u62a2\u5e84 ",sound:"fix_msg_8.m4a"},this._quickChatInfo.item8={index:8,content:"\u8f93\u5f97\u88e4\u8869\u90fd\u6ca1\u4e86 ",sound:"fix_msg_9.m4a"},this._quickChatInfo.item9={index:9,content:"\u6211\u7ed9\u4f60\u4eec\u9001\u6e29\u6696\u4e86 ",sound:"fix_msg_10.m4a"},this._quickChatInfo.item10={index:10,content:"\u8c22\u8c22\u8001\u677f ",sound:"fix_msg_11.m4a"},this._quickChatInfo.item11={index:11,content:"\u522b\u5439\u725b\u903c,\u6709\u672c\u4e8b\u6218\u5230\u5e95 ",sound:"fix_msg_12.m4a"},cc.vv.netRoot.on("quick_chat_push",function(t){t=t;var i=cc.vv.gameNetMgr.getSeatNodeByUid(t.sender),n=t.content,a=e.getQuickChatInfo(n);e.chatVoices[i].getComponent("Voice").chat(a.content),cc.vv.audioMgr.playSFX(a.sound)}),cc.vv.netRoot.on("emoji_push",function(t){t=t.detail;var i=cc.vv.gameNetMgr.getSeatNodeByUid(t.sender);e.chatVoices[i].getComponent("Voice").emoji(t.content)})},getQuickChatInfo:function(e){var t="item"+e;return this._quickChatInfo[t]},onShowChatClick:function(){cc.vv.uitools.ShowLayer("Chat",cc.director.getScene())},onShowChatClick2:function(){this.chatNode.active=!0}}),cc._RF.pop()},{}],Chat:[function(e,t,i){"use strict";cc._RF.push(t,"f1b09r15fhE0o4fMP0TknHv","Chat"),cc.Class({extends:cc.Component,properties:{_chatVoice:null,_chatRoot:null,_tabQuick:null,_tabEmoji:null,_tabQuickBtn:null,_tabEmojiBtn:null,_iptChat:null,_bg2:null,_quickChatInfo:null},onLoad:function(){var e=this;this.node.active=!0,this._chatVoice=cc.find("Canvas/seatinfo/chat_voice"),this._chatVoice.active=!0,this._tabQuickBtn=this.node.getChildByName("chatinfo").getChildByName("tabMsg"),this._tabEmojiBtn=this.node.getChildByName("chatinfo").getChildByName("tabEmoji"),cc.loader.loadRes("chat/tabMsg_2",cc.SpriteFrame,function(t,i){e._tabQuickBtn.getComponent(cc.Button).normalSprite=i}),this._tabQuick=this.node.getChildByName("chatinfo").getChildByName("msgScroll");for(var t=this._tabQuick.getChildByName("view").getChildByName("content").children,i=0;i<t.length;++i)t[i].name.indexOf("item")>=0&&cc.vv.uitools.addClickEvent(t[i],this.node,"Chat","onQuickChatItemClicked");cc.vv.netRoot.on("show_chat_click",function(t){e.node.active=!0}),this._quickChatInfo={},this._quickChatInfo.item0={index:0,content:"\u73a9\u6e38\u620f\uff0c\u8bf7\u5148\u8fdb\u7fa4 ",sound:"fix_msg_1.m4a"},this._quickChatInfo.item1={index:1,content:"\u7fa4\u5185\u6e38\u620f\uff0c\u5207\u52ff\u8f6c\u53d1 ",sound:"fix_msg_2.m4a"},this._quickChatInfo.item2={index:2,content:"\u522b\u78e8\u8e6d\uff0c\u5feb\u70b9\u6253\u724c ",sound:"fix_msg_3.m4a"},this._quickChatInfo.item3={index:3,content:"\u6211\u51fa\u53bb\u53eb\u4eba ",sound:"fix_msg_4.m4a"},this._quickChatInfo.item4={index:4,content:"\u4f60\u7684\u724c\u597d\u9753\u54c7 ",sound:"fix_msg_5.m4a"},this._quickChatInfo.item5={index:5,content:"\u6211\u5f53\u5e74\u6a2a\u626b\u6fb3\u95e8\u4e94\u6761\u8857 ",sound:"fix_msg_6.m4a"},this._quickChatInfo.item6={index:6,content:"\u7b97\u4f60\u725b\u903c ",sound:"fix_msg_7.m4a"},this._quickChatInfo.item7={index:7,content:"\u522b\u8ddf\u6211\u62a2\u5e84 ",sound:"fix_msg_8.m4a"},this._quickChatInfo.item8={index:8,content:"\u8f93\u5f97\u88e4\u8869\u90fd\u6ca1\u4e86 ",sound:"fix_msg_9.m4a"},this._quickChatInfo.item9={index:9,content:"\u6211\u7ed9\u4f60\u4eec\u9001\u6e29\u6696\u4e86 ",sound:"fix_msg_10.m4a"},this._quickChatInfo.item10={index:10,content:"\u8c22\u8c22\u8001\u677f ",sound:"fix_msg_11.m4a"},this._quickChatInfo.item11={index:11,content:"\u522b\u5439\u725b\u903c,\u6709\u672c\u4e8b\u6218\u5230\u5e95 ",sound:"fix_msg_12.m4a"}},getQuickChatInfo:function(e){var t="item"+e;return this._quickChatInfo[t]},onBtnChatClicked:function(){this.node.active=!this.node.active},onBgClicked:function(){this.node.active=!1},onTabClicked:function(e){var t=this;"tabMsg"==e.target.name?(this._tabQuick.active=!0,cc.loader.loadRes("chat/tabMsg_2",cc.SpriteFrame,function(e,i){t._tabQuickBtn.getComponent(cc.Button).normalSprite=i})):"tabEmoji"==e.target.name&&(this._tabQuick.active=!1,cc.loader.loadRes("chat/tabMsg_1",cc.SpriteFrame,function(e,i){t._tabQuickBtn.getComponent(cc.Button).normalSprite=i}))},onQuickChatItemClicked:function(e){this.node.active=!1;var t=this._quickChatInfo[e.target.name];cc.vv.socket.send("quick_chat",t.index)},onEmojiItemClicked:function(e){this.node.active=!1,cc.vv.socket.send("emoji",e.target.name)}}),cc._RF.pop()},{}],ClickAndRemove:[function(e,t,i){"use strict";cc._RF.push(t,"ca370iLC85FApr9J8W9GoPq","ClickAndRemove"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},ClickAndRemove:function(){this.node.removeFromParent()}}),cc._RF.pop()},{}],Control:[function(e,t,i){"use strict";cc._RF.push(t,"34d560o89VJfaMkN+jEe7ht","Control");cc.Class({extends:cc.Component,properties:{pokerPrefab:cc.v2refab,cardList:cc.Node,qiangzhuan:cc.Node,qiangzhuan2:cc.Node,beishu:cc.Node,selectniu:cc.Node,_selectList:null,_pokerSpriteList:null,_pokerList:null,_beishuSprite0:null,_beishuSprite1:null,_beishuSprite2:null,_beishuSprite3:null},onLoad:function(){this._selectList=new Array,cc.vv.netRoot.on("qiangzhuang_done",function(e){if("standup"!=Grobal.status){this.qiangzhuan.active=!1,this.qiangzhuan2.active=!1;for(var t=["buqiang","qiang1","qiang2","qiang4"],i=0;i<4;i++){this.qiangzhuan2.getChildByName(t[i]).getComponent(cc.Button)._updateState()}}},this),cc.vv.netRoot.on("shezhi_beishu",function(e){if("standup"!=Grobal.status&&"ready"!=Grobal.status){if(this.node.active=!0,1==Grobal.isGrab)this.qiangzhuan.active=!1,this.qiangzhuan2.active=!1,this.beishu.active=!1,this.selectniu.active=!1;else{this.qiangzhuan.active=!1,this.qiangzhuan2.active=!1,this._beishuSprite0=this.beishu.getChildByName("multiple0").getComponent(cc.Sprite),this._beishuSprite1=this.beishu.getChildByName("multiple1").getComponent(cc.Sprite),this._beishuSprite2=this.beishu.getChildByName("multiple2").getComponent(cc.Sprite),this._beishuSprite3=this.beishu.getChildByName("multiple3").getComponent(cc.Sprite);var t=this;cc.loader.loadRes("comm/btn"+Grobal.beishu[0],cc.SpriteFrame,function(e,i){t._beishuSprite0.spriteFrame=i}),cc.loader.loadRes("comm/btn"+Grobal.beishu[1],cc.SpriteFrame,function(e,i){t._beishuSprite1.spriteFrame=i}),cc.loader.loadRes("comm/btn"+Grobal.beishu[2],cc.SpriteFrame,function(e,i){t._beishuSprite2.spriteFrame=i}),cc.loader.loadRes("comm/btn"+Grobal.beishu[3],cc.SpriteFrame,function(e,i){t._beishuSprite3.spriteFrame=i}),this.beishu.active=!0,this.selectniu.active=!1}for(var i=0;i<10;i++){if(null!==this.beishu.getChildByName("multiple"+i))this.beishu.getChildByName("multiple"+i).getComponent(cc.Button)._updateState()}}},this),cc.vv.netRoot.on("dealbaserate_success",function(e){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(this.beishu.active=!1)},this),cc.vv.netRoot.on("dealpoker_done",function(e){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(this.selectniu.active=!1,this.node.active=!1)},this),cc.vv.netRoot.on("card_start_play",function(e){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(this.selectniu.active=!1,this.node.active=!1)},this),cc.vv.socket.addHandler("checkPlayerStatus_success",function(e){cc.vv.gameNetMgr.playerList=e.playerList,cc.vv.gameNetMgr.dispatchEvent("checkPlayerStatus_success")}),cc.vv.netRoot.on("game_restart_notice",function(e){this.qiangzhuan.active=!1,this.qiangzhuan2.active=!1,this.beishu.active=!1,this.selectniu.active=!1,this.cardList.removeAllChildren(),this._pokerSpriteList=new Array,this._selectList=new Array},this)},reset:function(){this.cardList.removeAllChildren(),this._pokerSpriteList=new Array,this._selectList=new Array,this.selectniu.active=!1},displayAndClickPokers:function(e){console.log("card list = "+JSON.stringify(e));this.cardList.removeAllChildren(),this._pokerSpriteList=new Array;this._pokerList=e;for(var t=0;t<5;t++){var i=cc.instantiate(this.pokerPrefab);i.status=2,i.setScale(.55);var n=e[t];i.setPosition(375,640);void 0!=n&&n.name;var a=new Array,o=cc.delayTime(.05+.05*t);if(6==Grobal.playerNum)var c=cc.moveTo(.3,cc.v2(150+85*t,290));else c=cc.moveTo(.3,cc.v2(220+85*t,180));var s=cc.scaleTo(.2,0,.55),r=cc.callFunc(function(e){null!==e.poker&&void 0!==e.poker&&(e.getComponent(cc.Sprite).spriteFrame=Grobal.pokerSpriteFrameMap[e.poker.name])}),l=cc.scaleTo(.2,.55,.55);if(a.push(o),a.push(c),a.push(s),a.push(r),a.push(l),this.cardList.addChild(i),this._pokerSpriteList.push(i),void 0!=n)if(i.poker=n,5==this._pokerList.length)if(t<3)i.runAction(cc.sequence(a));else{3==t?i.on(cc.Node.EventType.TOUCH_START,this.fourPokerClick,this):i.on(cc.Node.EventType.TOUCH_START,this.lastPokerClick,this);o=cc.delayTime(.05+.05*t);if(6==Grobal.playerNum)c=cc.moveTo(.3,cc.v2(150+85*t,290));else c=cc.moveTo(.3,cc.v2(220+85*t,180));i.runAction(cc.sequence(o,c))}else i.runAction(cc.sequence(a));else{i.poker={};o=cc.delayTime(.05+.05*t);if(6==Grobal.playerNum)c=cc.moveTo(.3,cc.v2(150+85*t,290));else c=cc.moveTo(.3,cc.v2(220+85*t,180));i.runAction(cc.sequence(o,c)),3==t?i.on(cc.Node.EventType.TOUCH_START,this.fourPokerClick,this):i.on(cc.Node.EventType.TOUCH_START,this.lastPokerClick,this)}}cc.vv.audioMgr.playSFX("effect/poker_deal.mp3")},showQiangZhuan:function(){"see"==Grobal.playType?(this.qiangzhuan.active=!1,this.qiangzhuan2.active=!0):"nor"==Grobal.playType&&(this.qiangzhuan.active=!0,this.qiangzhuan2.active=!1),this.beishu.active=!1,this.selectniu.active=!1;var e=this.node.getChildByName("Time");void 0!=e&&null!=e&&e.removeFromParent()},onQiangClick:function(e){var t=e.target.name;t=t.slice(-1);var i=parseInt(t);cc.vv.socket.send("qiangzhuang",{qiangzhuang:i})},onBuqiangClick:function(){cc.vv.socket.send("qiangzhuang",{qiangzhuang:0})},sendRateClick:function(e){var t=e.target.name.slice(8);cc.vv.socket.send("dealbaserate",{rate:Grobal.beishu[t]}),cc.vv.audioMgr.playSFX("effect/compare_bet.mp3")},fourPokerClick:function(){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(cc.vv.socket.send("showFourPokers"),cc.vv.audioMgr.playSFX("effect/poker_click.mp3"))},lastPokerClick:function(){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(cc.vv.socket.send("showAllPokers"),cc.vv.audioMgr.playSFX("effect/poker_click.mp3"))},displayPokers:function(e,t){this.cardList.removeAllChildren(),this._pokerSpriteList=new Array;this._pokerList=e;for(var i=0,n=0;n<5;n++){var a=e[n];if((c=cc.instantiate(this.pokerPrefab)).status=2,c.setScale(.55),void 0!=a){var o=a.name;0==t&&n==e.length-1?i=n:c.getComponent(cc.Sprite).spriteFrame=Grobal.pokerSpriteFrameMap[o],c.poker=a}else c.poker={},3==n?c.on(cc.Node.EventType.TOUCH_START,this.fourPokerClick,this):c.on(cc.Node.EventType.TOUCH_START,this.lastPokerClick,this);0==t?6==Grobal.playerNum?c.setPosition(150+85*n,290):c.setPosition(220+85*n,180):(6==Grobal.playerNum?c.setPosition(150,290):c.setPosition(200,160),n>0&&c.runAction(cc.moveBy(.5,cc.v2(85*n,0)))),this.cardList.addChild(c),this._pokerSpriteList.push(c)}if(0!=i){var c=this._pokerSpriteList[i],s=new Array,r=cc.scaleTo(.2,0,.55),l=cc.callFunc(function(){c.getComponent(cc.Sprite).spriteFrame=Grobal.pokerSpriteFrameMap[o]}),u=cc.scaleTo(.2,.55,.55);s.push(r),s.push(l),s.push(u),c.runAction(cc.sequence(s))}cc.vv.audioMgr.playSFX("effect/poker_deal.mp3")},showSelectNiu:function(){this.qiangzhuan.active=!1,this.qiangzhuan2.active=!1,this.beishu.active=!1,this.selectniu.active=!0},onHasNiuClick:function(){cc.vv.socket.send("dealpoker")}}),cc._RF.pop()},{}],GameFinishUI:[function(e,t,i){"use strict";cc._RF.push(t,"70609wjrC9M6asQUUB/YoGT","GameFinishUI"),cc.Class({extends:cc.Component,properties:{_args:null,info:cc.Node,share:cc.Button,close:cc.Button},onLoad:function(){this.info.active=!1},init:function(e){this._args=e,this.initView()},initView:function(){this.info.active=!0;var e=this.info.getChildByName("roominfo");e.getChildByName("roomnum").getComponent(cc.Label).string=Grobal.roomNum,e.getChildByName("jushu").getComponent(cc.Label).string=Grobal.maxOfGame;var t=new Date(Grobal.startTime);e.getChildByName("starttime").getComponent(cc.Label).string=t.getMonth()+1+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes(),cc.vv.uitools.addClickEvent(this.share,this.node,"GameFinishUI","onShareClick"),cc.vv.uitools.addClickEvent(this.close,this.node,"GameFinishUI","onCloseClick"),this.ShowUserInfo()},ShowUserInfo:function(){for(var e=this.info.getChildByName("user"),t=this._args.playerList[0],i=0;i<this._args.playerList.length;i++){var n="user"+(i+1),a=e.getChildByName(n),o=this._args.playerList[i];a.getChildByName("username").getComponent(cc.Label).string=o.nickname,a.getChildByName("id").getComponent(cc.Label).string=o.uid;var c=o.score;a.getChildByName("score").getComponent(cc.Label).string=c,a.active=!0,0==i?a.getChildByName("fangzhu").active=!0:t.score==c?a.getChildByName("fangzhu").active=!0:a.getChildByName("fangzhu").active=!1;var s=cc.vv.gameNetMgr.getSeatIndexByID(o.uid);void 0!==cc.vv.gameNetMgr.seats[s]&&(a.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=cc.vv.gameNetMgr.seats[s].getUserIcon()),a.active=!0}},onCloseClick:function(){window.location.href=Grobal.hallUrl},onShareClick:function(){window.location.href=Grobal.hallUrl+"index.php/index/roomList/info?id="+Grobal.roomNum}}),cc._RF.pop()},{}],GameNetMgr:[function(e,t,i){"use strict";cc._RF.push(t,"36540G872FH34jVagdvHhHN","GameNetMgr"),window.Grobal={uid:null,socket:null,roomNum:null,difen:0,beishu:0,playerNum:null,hallUrl:"http://zh.iwuxb.com/",playType:"",zhuangType:"",numOfGame:null,maxOfGame:null,startTime:null,seatIndex:-1,isReady:!1,status:"standup",isGrab:!1,pokerSpriteFrameMap:null,allPokers:new Array,selectPokers:new Array},Grobal.reset=function(){Grobal.allPokers=new Array,Grobal.selectPokers=new Array,Grobal.isReady=!1,Grobal.status="standup"},cc.Class({extends:cc.Component,properties:{dataEventHandler:null,readyCount:0,playerList:new Array,seats:null,chatVoices:null},dispatchEvent:function(e,t){this.dataEventHandler&&this.dataEventHandler.emit(e,t)},connectGameServer:function(e){cc.vv.socket.connect(e),Grobal.socket=cc.vv.socket},onRoomJoin:function(){var e=this;cc.vv.socket.addHandler(Grobal.roomNum+"joinRoom",function(t){Grobal.maxOfGame=t.maxOfGame,Grobal.startTime=t.startTime,Grobal.numOfGame=t.numOfGame,Grobal.playType=t.playType,Grobal.zhuangType=t.zhuangType,e.playerList=t.playerList,e.SetSeatInfo(),e.dispatchEvent("new_user_comes_push")}),cc.vv.socket.addHandler(Grobal.roomNum+"state_changed",function(t){t&&t.playerList&&(cc.vv.gameNetMgr.playerList=t.playerList,cc.vv.gameNetMgr.SetSeatInfo(),e.dispatchEvent("user_state_changed")),"room_wait"!==t.roomStage&&cc.vv.gameNetMgr.dispatchEvent("guanzhan")}),cc.vv.socket.addHandler(Grobal.roomNum+"show_tips",function(e){cc.vv.gameNetMgr.dispatchEvent("show_tips_message",e.info)}),cc.vv.socket.addHandler(Grobal.roomNum+"room_player_changed",function(e){for(var t="",i="",n=0;n<e.length;++n){var a=e[n];a.uid==Grobal.uid&&"ready"==a.status?t="\u4f60\u5df2\u51c6\u5907":"ready"==a.status&&(i=""==i?"\u5df2\u51c6\u5907\u7684\u7528\u6237\u6709:"+a.nickname:i+"\u3001"+a.nickname)}""!=t&&""==i&&(i="\u8fd8\u6ca1\u6709\u5176\u4ed6\u7528\u6237\u51c6\u5907")}),cc.vv.socket.addHandler(Grobal.roomNum+"play_state_change",function(t){e.dispatchEvent("play_state_change",t)}),cc.vv.socket.addHandler(Grobal.roomNum+"room_time_update",function(e){var t=e.roomStage+"_event",i=e.stagetime-e.servertime,n=e.lasttime-i;cc.vv.uitools.ShowTime("Time",cc.director.getScene(),{time:n,x:375,y:850,eventName:t})}),cc.vv.socket.addHandler(Grobal.roomNum+"startGame",function(e){Grobal.numOfGame=e}),cc.vv.socket.addHandler(Grobal.uid+"dealingCards",function(t){console.log("dealingCards = "+JSON.stringify(t)),Grobal.allPokers=t.pokerList,t&&t.playerList&&(cc.vv.gameNetMgr.playerList=t.playerList),e.dispatchEvent("user_state_dealingCards",t),cc.vv.gameNetMgr.dispatchEvent("show_tips_message")}),cc.vv.socket.addHandler(Grobal.roomNum+"startGrab",function(t){t&&t.playerList&&(cc.vv.gameNetMgr.playerList=t.playerList,cc.vv.gameNetMgr.SetSeatInfo()),e.dispatchEvent("start_qiang_zhuang")}),cc.vv.socket.addHandler("qiangzhuang_done",function(t){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(Grobal.status="qianged",e.dispatchEvent("qiangzhuang_done"),cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u9009\u62e9"))}),cc.vv.socket.addHandler(Grobal.roomNum+"selectrate",function(t){t&&t.playerList&&(cc.vv.gameNetMgr.playerList=t.playerList,cc.vv.gameNetMgr.SetSeatInfo()),t&&1==t.isdeal_zhuan||e.dispatchEvent("shezhi_beishu")}),cc.vv.socket.addHandler(Grobal.roomNum+"deal_zhuang",function(t){t.zhuang==Grobal.uid?Grobal.isGrab=!0:Grobal.isGrab=!1,e.dispatchEvent("deal_zhuang",t)}),cc.vv.socket.addHandler("dealbaserate_success",function(t){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(Grobal.status="beishu",e.dispatchEvent("dealbaserate_success"),cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u7b49\u5f85\u95f2\u5bb6\u4e0b\u6ce8"))}),cc.vv.socket.addHandler(Grobal.roomNum+"kanpai_state_change",function(e){cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u70b9\u51fb\u724c\u9762\u770b\u724c")}),cc.vv.socket.addHandler(Grobal.uid+"dealingTheFourCards",function(t){Grobal.allPokers=t.pokerList,e.dispatchEvent("user_dealingTheFourCards",t)}),cc.vv.socket.addHandler(Grobal.uid+"dealingTheFiveCards",function(t){Grobal.allPokers=t.pokerList,e.dispatchEvent("user_dealingTheFiveCards",t),cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u8bf7\u644a\u724c")}),cc.vv.socket.addHandler("dealpoker_done",function(t){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(Grobal.status="arranged",e.dispatchEvent("dealpoker_done"),cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u7b49\u5f85\u644a\u724c"))}),cc.vv.socket.addHandler(Grobal.roomNum+"user_deal_poker_done",function(t){console.log("msg = "+JSON.stringify(t)),e.dispatchEvent("user_deal_poker_done",t)}),cc.vv.socket.addHandler(Grobal.roomNum+"game_score",function(t){Grobal.dealInfo=t,e.dispatchEvent("card_start_play",t),cc.vv.gameNetMgr.dispatchEvent("show_tips_message"),cc.vv.uitools.ClearTime(cc.director.getScene())}),cc.vv.socket.addHandler(Grobal.roomNum+"gameFinish",function(t){e.dispatchEvent("single_game_finish",t)}),cc.vv.socket.addHandler(Grobal.uid+"disconnect_server",function(e){cc.vv.userMgr.login()}),cc.vv.socket.addHandler("checkPlayerStatus_success",function(t){cc.vv.gameNetMgr.playerList=t.playerList,e.dispatchEvent("checkPlayerStatus_success")}),cc.vv.socket.addHandler("quick_chat_push",function(t){e.dispatchEvent("quick_chat_push",t)})},SetSeatInfo:function(){for(var e=0;e<this.playerList.length;++e){var t=this.playerList[e];null!==t&&t.uid==Grobal.uid&&(Grobal.seatIndex=e,Grobal.isReady=t.isReady,Grobal.status=t.status,Grobal.isGrab=t.isGrab)}},getIsOpen:function(){for(var e=0;e<this.playerList.length;e++){var t=this.playerList[e];if("standup"!=t.status&&"ready"!=t.status)return!0}return!1},getLocalIndex:function(e){var t=1*Grobal.playerNum;return(Grobal.seatIndex+t-e)%t},getSeatIndexByID:function(e){for(var t=0;t<this.playerList.length;++t){var i=this.playerList[t];if(null!==i&&i.uid==e)return t}return-1},getSeatNodeByUid:function(e){var t=-1;if(null==this.seats)return t;var i=cc.vv.gameNetMgr.getSeatIndexByID(e);return t=cc.vv.gameNetMgr.getLocalIndex(i)}}),cc._RF.pop()},{}],GamePlay:[function(e,t,i){"use strict";cc._RF.push(t,"a93b9MEo19ILbq5GnICT2T2","GamePlay");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(null==e||"object"!=(void 0===e?"undefined":n(e)))return e;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(e instanceof Array){for(var t=[],i=0;i<e.length;++i)t[i]=a(e[i]);return t}if(e instanceof Object){t={};for(var o in e)e.hasOwnProperty(o)&&(t[o]=a(e[o]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")}cc.Class({extends:cc.Component,properties:{poker:cc.Prefab,myNode:cc.Node,readyBtn:cc.Node,backPrefab:cc.Prefab,_backPrefabPool:null,_clickTimeArray:null,_voiceMsgQueue:[],_lastPlayTime:null,_voice_btn:cc.Button,_playingSeat:null},onLoad:function(){this._backPrefabPool=new cc.NodePool,this._pokerSpriteFrameMap={},this._clickTimeArray=new Array;var e=this._pokerSpriteFrameMap,t=this;this.myNode.active=!0,this.readyBtn.on(cc.Node.EventType.TOUCH_START,this.readyCallBack,this),cc.loader.loadRes("comm/pokers",cc.SpriteAtlas,function(i,n){for(var a=n.getSpriteFrames(),o=0;o<a.length;o++){var c=a[o];e[c._name]=c,Grobal.pokerSpriteFrameMap=e}t.init()}),cc.vv.audioMgr.playBGM("bgm_room_1.mp3")},init:function(){cc.vv.netRoot.on("reconnect_update",function(t){cc.vv.userMgr.enterRoom(),e.checkPlayerStatus()},this),cc.vv.gameNetMgr.dispatchEvent("game_play_init_over",!0),this.myNode.active=!1;var e=this;cc.vv.gameNetMgr.getIsOpen()&&(e.readyBtn.active=!1),"standup"==Grobal.status&&"ready"==Grobal.status||e.checkPlayerStatus(),cc.vv.netRoot.on("user_state_dealingCards",function(t){(cc.find("Canvas/room_bg/roomjushu").getComponent(cc.Label).string=Grobal.numOfGame+" / "+Grobal.maxOfGame+" \u5c40",e.readyBtn.active=!1,Grobal.allPokers.length>0)&&(e.myNode.getComponent("Control").displayAndClickPokers(a(Grobal.allPokers)),e.myNode.active=!0)},this),cc.vv.netRoot.on("start_qiang_zhuang",function(t){if("standup"==Grobal.status||"ready"==Grobal.status)return e.readyBtn.active=!1,void cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u8bf7\u7b49\u5f85\u4e0b\u4e00\u5c40");e.readyBtn.active=!1,e.myNode.getComponent("Control").showQiangZhuan(),cc.vv.audioMgr.playSFX("effect/room_start_compare.mp3"),e.myNode.active=!0,cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u62a2\u5e84")},this),cc.vv.netRoot.on("shezhi_beishu",function(t){"standup"!=Grobal.status&&"ready"!=Grobal.status&&(e.readyBtn.active=!1,1==Grobal.isGrab?cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u7b49\u5f85\u95f2\u5bb6\u4e0b\u6ce8"):cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u8bf7\u4e0b\u6ce8"))},this),cc.vv.netRoot.on("user_dealingTheFourCards",function(t){(e.readyBtn.active=!1,Grobal.allPokers.length>0)&&(e.myNode.getComponent("Control").displayPokers(a(Grobal.allPokers),!1),e.myNode.active=!0)},this),cc.vv.netRoot.on("user_dealingTheFiveCards",function(t){if(e.readyBtn.active=!1,Grobal.allPokers.length>0){var i=e.myNode.getComponent("Control");i.showSelectNiu(),i.displayPokers(a(Grobal.allPokers),!1),e.myNode.active=!0}},this),cc.vv.netRoot.on("game_restart",function(t){e.readyBtn.active=!0,Grobal.numOfGame==Grobal.maxOfGame&&e.readyCallBack(),cc.vv.uitools.ClearTime(cc.director.getScene())},this),cc.vv.netRoot.on("guanzhan",function(t){"standup"!=Grobal.status&&"ready"!=Grobal.status||(e.readyBtn.active=!1)},this),cc.vv.netRoot.on("single_game_finish",function(t){cc.vv.uitools.ShowLayer("GameFinishUI",e.node,t)},this),cc.vv.netRoot.on("game_restart_notice",function(t){e.readyBtn.active=!0},this)},checkPlayerStatus:function(){cc.vv.socket.send("checkPlayerStatus",{roomNum:Grobal.roomNum})},readyCallBack:function(){var e=this.node.getChildByName("Time");void 0!=e&&null!=e&&e.removeFromParent(),cc.vv.socket.send("ready",{uid:Grobal.uid,roomNum:Grobal.roomNum}),this.myNode.getComponent("Control").reset(),this.readyBtn.active=!1},update:function(e){}}),cc._RF.pop()},{}],Game:[function(e,t,i){"use strict";cc._RF.push(t,"a8d41VU8uFBfoSPkMusKpsP","Game"),cc.Class({extends:cc.Component,properties:{roomIdLable:cc.Label,difenLable:cc.Label,jushuLabel:cc.Label,cardLabel:cc.Label,tipNode:cc.Node,tipLabel:cc.Label,_choiceBtn:null,_tipslast:null,_lastTime:0,_shengyinBtn:null,_homeBtn:null},onLoad:function(){this.roomIdLable.string="\u684c\u53f7\uff1a"+Grobal.roomNum,this.cardLabel.string=cc.vv.userMgr.houseCard+"\u5f20",this.difenLable.string="\u5e95\u5206:"+Grobal.difen,0==Grobal.numOfGame?this.jushuLabel.string="1 / "+Grobal.maxOfGame+" \u5c40":this.jushuLabel.string=Grobal.numOfGame+" / "+Grobal.maxOfGame+" \u5c40",this.initHandlers()},initHandlers:function(){var e=this;cc.vv.netRoot.on("show_tips_message",function(t){e.ShowTips(t)},this)},ShowTips:function(e){null==e?this.tipNode.active=!1:(this.tipNode.active=!0,this.tipLabel.string=e,this.tipNode.height=this.tipNode.getChildByName("label").height+20)},ShowControlList:function(){var e=this;cc.loader.loadRes("prefabs/ControllUI",function(t,i){if(null==e.node.getChildByName("ControllUI")){var n=cc.instantiate(i);e.node.addChild(n)}})},onGuizeBtnClick:function(){cc.vv.uitools.ShowLayer("Rule",this.node)},onTishiClick:function(){cc.vv.uitools.ShowLayer("TipRule",this.node)},onShengyinBtnClick:function(){cc.vv.uitools.ShowLayer("SettingUI2",this.node)},onHomeBtnClick:function(){cc.vv.uitools.ShowAlert(cc.director.getScene(),"\u786e\u8ba4\u8fd4\u56de\u4e3b\u9875",function(){window.parent.location.href=Grobal.hallUrl},!0)},onWanfaBtnClick:function(){cc.vv.uitools.ShowLayer("Rule",this.node)},update:function(e){if(1==this.tipNode.active){var t=this.tipLabel.string.replace(this._tipslast,"");Date.now()-this._lastTime>1e3&&(null==this._tipslast||"..."==this._tipslast?this._tipslast=".":this._tipslast=this._tipslast+".",this.tipLabel.string=t+this._tipslast,this._lastTime=Date.now())}}}),cc._RF.pop()},{}],HTTP:[function(e,t,i){"use strict";cc._RF.push(t,"393007tIjxANqjaEynrBoaM","HTTP");var n=cc.Class({extends:cc.Component,statics:{sessionId:0,userid:0,master_url:URL,url:URL,sendRequest:function(e,t,i,a){var o=cc.loader.getXMLHttpRequest();o.timeout=5e3;var c="?";for(var s in t)"?"!=c&&(c+="&"),c+=s+"="+t[s];null==a&&(a=n.url);var r=a+e+encodeURI(c);return o.open("GET",r,!0),cc.sys.isNative&&o.setRequestHeader("Accept-Encoding","gzip,deflate","text/html;charset=UTF-8"),o.onreadystatechange=function(){if(4===o.readyState&&o.status>=200&&o.status<300)try{var e=JSON.parse(o.responseText);null!==i&&i(e)}catch(e){}},o.send(),o}}});cc._RF.pop()},{}],Loading:[function(e,t,i){"use strict";cc._RF.push(t,"d5514vyyh1PT79voJ6ap6oD","Loading"),cc.Class({extends:cc.Component,properties:{tipLabel:cc.Label,_tipStr:"1",_isloading:!1,_progress:0,_lasttime:0,_load:0},onLoad:function(){cc.args=this.urlParse(),this.initMgr()},initMgr:function(){cc.vv={},cc.vv.socket=e("../utils/Socket");var t=e("../mgr/UserMgr");if(cc.vv.userMgr=new t,void 0==cc.vv.gameNetMgr){var i=e("../mgr/GameNetMgr");cc.vv.gameNetMgr=new i}var n=cc.find("root");cc.vv.gameNetMgr.dataEventHandler=n,cc.vv.netRoot=n;var a=e("../comp/UI");cc.vv.uitools=new a;var o=e("../mgr/AudioMgr");cc.vv.audioMgr=new o,cc.vv.audioMgr.init(),this.startPreLoading()},startPreLoading:function(){this._tips=cc.find("Canvas/nettips"),this._tipLabel=this._tips.getComponent(cc.Label),void 0==cc.args&&(cc.args={}),void 0!=cc.args.roomNum&&void 0!=cc.args.uid?(cc.vv.userMgr.login(),cc.vv.netRoot.on("show_tips_message",function(e){this.ShowTips(e)},this)):cc.vv.uitools.ShowAlert(cc.director.getScene(),"\u65e0\u6548\u94fe\u63a5",function(){window.parent.location.href=Grobal.hallUrl},!1)},ShowTips:function(e){null==e?this._tips.active=!1:(this._tips.active=!0,this._tipLabel.string=e)},urlParse:function(){var e,t,i={};if(null==window.location)return i;for(var n=window.location.href,a=n.indexOf("?"),o=n.substr(0,a),c=(n=n.substr(a+1)).split("&"),s=0;s<c.length;s++)(a=c[s].indexOf("="))>0&&(e=c[s].substring(0,a),t=c[s].substr(a+1),i[e]=t);return i.href=o,i}}),cc._RF.pop()},{"../comp/UI":"UI","../mgr/AudioMgr":"AudioMgr","../mgr/GameNetMgr":"GameNetMgr","../mgr/UserMgr":"UserMgr","../utils/Socket":"Socket"}],PokerAct:[function(e,t,i){"use strict";cc._RF.push(t,"34e68KzfLNAy61TQsCHHH18","PokerAct"),cc.Class({extends:cc.Component,properties:{sprite:cc.Sprite},onLoad:function(){},init:function(e){this.sprite.spriteFrame=e;var t=new Array,i=cc.scaleTo(.2,1.2),n=cc.scaleTo(.2,1);t.push(i),t.push(n);var a=cc.sequence(t);this.node.runAction(a)}}),cc._RF.pop()},{}],Root:[function(e,t,i){"use strict";cc._RF.push(t,"16f93sEHY5KvYnG1mEPAY7W","Root"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.game.addPersistRootNode(this.node)}}),cc._RF.pop()},{}],Rule:[function(e,t,i){"use strict";cc._RF.push(t,"f68a12412dJWpDS+NGljPMp","Rule"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],ScoreAni:[function(e,t,i){"use strict";cc._RF.push(t,"76c0fHi3Q9EM60lP1lXCNIR","ScoreAni"),cc.Class({extends:cc.Component,properties:{_prefabs:null,_data:null,_parent:null},onLoad:function(){},show:function(e,t){var i=this;this._data=e,this._parent=t,cc.loader.loadRes("prefabs/coin",function(e,t){i._prefabs=t,i.showOut()})},showOut:function(){var e=this;if(this._data.outArr.length>0){for(var t=0;t<this._data.outArr.length;t++)this.createSingle(this._data.outArr[t],this._data.sourcePos);cc.vv.audioMgr.playSFX("effect/coin_income.mp3"),setTimeout(function(){e.showIn()},1500)}else e.showIn()},showIn:function(){var e=this;if(this._data.inArr.length>0){for(var t=0;t<this._data.inArr.length;t++)this.createSingle(this._data.sourcePos,this._data.inArr[t]);cc.vv.audioMgr.playSFX("effect/coin_income.mp3"),setTimeout(function(){e._parent.removeFromParent()},1500)}else e._parent.removeFromParent()},createSingle:function(e,t){for(var i=0;i<5;i++){var n=cc.instantiate(this._prefabs),a=e.x,o=e.y;n.setPosition(cc.v2(a,o));new Array,cc.moveTo(1,t),cc.callFunc(function(){n.removeFromParent()});n.runAction(cc.moveTo(.1+.15*(i+1),t)),this._parent.addChild(n)}}}),cc._RF.pop()},{}],Score:[function(e,t,i){"use strict";cc._RF.push(t,"dd0289n215KZ5Rj7Um4xO3Q","Score"),cc.Class({extends:cc.Component,properties:{adds:{default:[],type:[cc.Node]},_totalAdd:cc.Node,_tatalScore:0},init:function(){this.node.active=!0;for(var e=0;e<3;e++)this.adds[e].active=!1;this._totalAdd=this.node.getChildByName("total_score"),this._totalAdd.active=!1,this._tatalScore=0},ShowScore:function(e,t){this.adds[e].active=!0,this.adds[e].getChildByName("add_score").getComponent(cc.Label).string=t.score,this.adds[e].getChildByName("ext_add").getComponent(cc.Label).string=t.ext_score;var i=parseInt(t.score)+parseInt(t.ext_score);this.AddTotal(i)},AddTotal:function(e){this._tatalScore=this._tatalScore+e,this.ShowAddTotal()},ShowTotal:function(e){this._tatalScore=e,this.ShowAddTotal()},ShowAddTotal:function(){this._totalAdd.active=!0,this._totalAdd.getChildByName("add_score").getComponent(cc.Label).string=this._tatalScore}}),cc._RF.pop()},{}],SeatControl:[function(e,t,i){"use strict";cc._RF.push(t,"316f8nhmO5LEbFoxObKpigy","SeatControl"),cc.Class({extends:cc.Component,properties:{seats:{default:[],type:[cc.Node]},_seats:[],_chatVoices:[],_cards:null,_daqiang_agrs:null,_beida_agrs:null},onLoad:function(){if(this.initView(),this.initEventHandlers(),0==Grobal.numOfGame){for(var e=!1,t=0;t<cc.vv.gameNetMgr.playerList.length;++t){cc.vv.gameNetMgr.playerList[t].uid!=Grobal.uid&&(e=!0)}1==e&&(this.node.active=!1)}else this.node.active=!0},initView:function(){this._seats=new Array,this._chatVoices=new Array,this._cards=new Array;for(var e=0;e<this.seats.length;e++)this.seats[e].active=!1;for(var t=cc.vv.gameNetMgr.playerList,i=0;i<t.length;i++){var n=cc.vv.gameNetMgr.getLocalIndex(i),a=this.seats[n].getComponent("Card");this._cards.push(a)}for(var o=0;o<t.length;o++){n=cc.vv.gameNetMgr.getLocalIndex(o);var c=this.seats[n].getComponent("Seat");this._seats.push(c),c.setUserInfo(t[o]),this.seats[n].active=!0}cc.vv.gameNetMgr.seats=this._seats},initEventHandlers:function(){var e=this;cc.vv.netRoot.on("new_user_comes_push",function(t){e.initView()},this),cc.vv.netRoot.on("user_state_changed",function(t){e.initView()},this),cc.vv.netRoot.on("game_play_init_over",function(e){this.node.active=e},this),cc.vv.netRoot.on("play_state_change",function(t){e.changeUserState(t)},this),cc.vv.netRoot.on("user_state_dealingCards",function(t){e.initSeatCard(null)},this),cc.vv.netRoot.on("shezhi_beishu",function(t){e.updateQiangStatus()},this),cc.vv.netRoot.on("deal_zhuang",function(t){e.showDealZhuanAni(t)},this),cc.vv.netRoot.on("user_deal_poker_done",function(t){e.ShowUserCards("1",t);var i="effect/man"+t.value+".mp3";cc.vv.audioMgr.playSFX(i)},this),cc.vv.netRoot.on("card_start_play",function(t){e.ShowResult(t)},this),cc.vv.netRoot.on("checkPlayerStatus_success",function(t){e.resetSelf()},this)},changeUserState:function(e){var t=parseInt(e.uid),i=cc.vv.gameNetMgr.getSeatIndexByID(t),n=this._seats[i];if("ready"==e.state)n.onShowState("ready");else if("qiangzhuang"==e.state)if(e.value>0){e.value;n.onShowState("qiangzhuang",e.value);var a="effect/qiangzhuang.mp3";cc.vv.audioMgr.playSFX(a)}else{n.onShowState("nograb_icon");a="effect/buqiang.mp3";cc.vv.audioMgr.playSFX(a)}else if("beishu"==e.state){n.onShowStateBNum(e.value,"rate");a="effect/beishu"+e.value+".mp3";cc.vv.audioMgr.playSFX(a)}else if("dealpoker"==e.state){var o=this._cards[i];t==Grobal.uid?o.ShowSelfCardFinish():o.ShowCardFinish()}},initSeatCard:function(e){for(var t=cc.vv.gameNetMgr.playerList,i=0;i<t.length;i++){var n=cc.vv.gameNetMgr.getSeatIndexByID(t[i].uid),a=this._seats[n].getComponent("Card");this._cards.push(a),t[i].uid!==Grobal.uid&&"standup"!=t[i].status&&a.ShowCardNormal()}},showDealZhuanAni:function(e){console.log("data = "+JSON.stringify(e));for(var t=this,i=0;i<t._seats.length;i++){(n=t._seats[i]).setUserFrame(!1)}if(1==e.user.length){var n,a=cc.vv.gameNetMgr.getSeatIndexByID(e.user[0]);(n=t._seats[a]).showFrameAction(),n.showZhuang(!0),cc.vv.gameNetMgr.dispatchEvent("shezhi_beishu")}else{var o=e.user.length,c=3*o;c>=9&&(c=9);for(var s=-1,r=new Array,l=0;l<c;l++){for(var u=Math.floor(Math.random()*o);u==s;)u=Math.floor(Math.random()*o);s=u;var h={};h.uid=e.user[u],h.iszhuan=!1;var d=cc.callFunc(t.showZhuanAni,t,h);r.push(d);var v=cc.delayTime(.4);r.push(v)}var m=cc.delayTime(.2);r.push(m);var p={};p.uid=e.zhuang,p.iszhuan=!0;d=cc.callFunc(t.showZhuanAni,t,p);r.push(d);var g=cc.callFunc(function(){for(var i=0;i<t._seats.length;i++){var n=t._seats[i];n.getSeatUid()==e.zhuang?n.showZhuang(!0):(n.showZhuang(!1),n.setUserFrame(!1)),n.updateQiangStatus()}});r.push(g);var _=cc.sequence(r);this.node.runAction(_)}},showZhuanAni:function(e,t){parseInt(t.uid);var i=cc.vv.gameNetMgr.getSeatIndexByID(t.uid),n=this._seats[i];if(void 0!=n)if(1==t.iszhuan){if(n.showFrameAction(),"standup"==Grobal.status||"ready"==Grobal.status)return;t.uid==Grobal.uid?(Grobal.isGrab=!0,cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u7b49\u5f85\u95f2\u5bb6\u4e0b\u6ce8")):(Grobal.isGrab=!1,cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u8bf7\u4e0b\u6ce8")),cc.vv.gameNetMgr.dispatchEvent("shezhi_beishu")}else n.setUserFrame(!0)},updateQiangStatus:function(){for(var e=0;e<this._seats.length;e++){this._seats[e].updateQiangStatus()}},ShowUserCards:function(e,t){var i=parseInt(t.uid),n=cc.vv.gameNetMgr.getSeatIndexByID(i),a=this._cards[n];i==Grobal.uid?a.ShowSeflCardResult(t.cards,t.value,e):a.ShowCardResult(t.cards,t.value,e)},ShowResult:function(e){for(var t=this,i=e.uids,n=(e.cards,{}),a=0;a<i.length;a++)n[i[a]]=e[i[a]];var o=new Array,c={};c.uids=i,c.score=n;var s=cc.delayTime(2);o.push(s);var r=cc.callFunc(t.ShowCoinAnimation,t,c);o.push(r);var l=cc.delayTime(1.5);o.push(l);var u=cc.callFunc(function(){for(var e=cc.vv.gameNetMgr.playerList,i=0;i<e.length;i++){t._cards[i].hideCard()}});o.push(u);var h=cc.delayTime(.5);o.push(h);var d=cc.callFunc(t.ShowScore,t,c);o.push(d);var v=cc.delayTime(2.5);o.push(v);var m=cc.callFunc(function(){t.resetSeat(),cc.vv.gameNetMgr.dispatchEvent("game_restart")});o.push(m);var p=cc.sequence(o);this.node.runAction(p)},ShowCoinAnimation:function(e,t){for(var i=-1,n=cc.v2(375,640),a=0;a<this._seats.length;a++)if(1==this._seats[a].getIsZhuan()){i=this._seats[a].getSeatUid();var o=cc.vv.gameNetMgr.getSeatNodeByUid(parseInt(i));n=this.node.convertToWorldSpaceAR(this.seats[o].getPosition())}var c=new Array,s=new Array;for(a=0;a<t.uids.length;a++){var r=parseInt(t.uids[a]);if(t.uids[a]!==i){o=cc.vv.gameNetMgr.getSeatNodeByUid(r);var l=this.node.convertToWorldSpaceAR(this.seats[o].getPosition());t.score[r].score>0?s.push(l):c.push(l)}}(t={}).sourcePos=n,t.outArr=c,t.inArr=s,cc.vv.uitools.ShowScoreAni(t),0==t.inArr.length&&t.outArr.length>=2&&cc.vv.uitools.ShowAnimation("tongsha",cc.director.getScene(),{action:"animation",isloop:!1,posx:375,posy:640})},ShowScore:function(e,t){for(var i=0;i<t.uids.length;i++){var n=parseInt(t.uids[i]),a=cc.vv.gameNetMgr.getSeatIndexByID(n),o=this._seats[a];o.onShowStateBNum(t.score[n].score,"score"),o.updateScore(t.score[n].totalScore),t.uids[i]==Grobal.uid&&t.score[n].score}},resetSeat:function(){for(var e=cc.vv.gameNetMgr.playerList,t=0;t<e.length;t++){this._cards[t].hideCard(),(i=this._seats[t]).onShowState("wu")}for(t=0;t<this._seats.length;t++){var i;(i=this._seats[t]).setUserFrame(!1),i.hideStatus(),"turn"==Grobal.zhuangType&&i.showZhuang(!1)}},resetSelf:function(){for(var e=cc.vv.gameNetMgr.playerList,t=0;t<e.length;t++){var i=cc.vv.gameNetMgr.getLocalIndex(t);this.seats[i].getComponent("Seat").updateUser(e[t])}}}),cc._RF.pop()},{}],Seat:[function(e,t,i){"use strict";cc._RF.push(t,"e8e118sLfNKiJkR8tTsEQj+","Seat"),cc.Class({extends:cc.Component,properties:{_isinit:!1,_unsel:null,_userInfo:null,_offline:null,_userName:null,_userScore:null,_userImage:null,_userState:null,_userFrame:null,_bg:null,_info:null,_userIcon:null,_voicemsg:null,_adj:null,_voicetime:0,_voicenum:3,_fangzhu:null,_guanzhan:null},onLoad:function(){0==this._isinit&&this.init()},init:function(){this._state=this.node.getChildByName("state"),this._statesp=this._state.getChildByName("spr"),this._stateSpr=this._state.getChildByName("spr").getComponent(cc.Sprite),this._userInfo=this.node.getChildByName("user_info"),this._guanzhan=this._userInfo.getChildByName("guanzhan"),this._offline=this._userInfo.getChildByName("user_offline"),this._fangzhu=this._userInfo.getChildByName("fangzhu"),this._userState=this._userInfo.getChildByName("user_state"),this._userName=this._userInfo.getChildByName("user_name").getComponent(cc.Label),this._userScore=this._userInfo.getChildByName("user_score").getComponent(cc.Label),this._userIcon=this._userInfo.getChildByName("user_icon").getComponent(cc.Sprite),this._userFrame=this._userInfo.getChildByName("frame"),this._userFrame.active=!1,this._voicemsg=this.node.getChildByName("voicemsg"),null!=this._voicemsg&&(this._adj=this._voicemsg.getChildByName("adj"),this._voicemsg.active=!1),this._isinit=!0},updateUser:function(e){var t=this,i=t._state.getChildByName("ready"),n=t._statesp.getChildByName("beishu"),a=t._state.getChildByName("beishu"),o=t._state.getChildByName("rate");if("standup"==e.status)this.node.getComponent("Card").hideCard(),Grobal.uid==t._info.uid&&cc.vv.gameNetMgr.dispatchEvent("game_restart_notice");else if("ready"==e.status)t._statesp.active=!1,a.active=!1,t._state.active=!0,o.active=!1,cc.loader.loadRes("niuniu/ready",cc.SpriteFrame,function(e,t){i.getComponent(cc.Sprite).spriteFrame=t}),i.active=!0;else if("qianged"==e.status)i.active=!1,a.active=!1,t._statesp.active=!0,o.active=!1,e.QiangNum>0?(cc.loader.loadRes("niuniu/qiangzhuang",cc.SpriteFrame,function(e,i){t._stateSpr.spriteFrame=i}),cc.loader.loadRes("niuniu/x"+e.QiangNum,cc.SpriteFrame,function(e,t){n.getComponent(cc.Sprite).spriteFrame=t}),n.active=!0):(cc.loader.loadRes("niuniu/nograb_icon",cc.SpriteFrame,function(e,i){t._stateSpr.spriteFrame=i}),n.active=!1);else if("beishu"==e.status)i.active=!1,a.active=!1,t._statesp.active=!1,o.active=!1,1==e.isGrab&&(cc.loader.loadRes("niuniu/x"+e.QiangNum,cc.SpriteFrame,function(e,t){a.getComponent(cc.Sprite).spriteFrame=t}),a.active=!0,t._fangzhu.active=!0);else if("beishued"==e.status||"arranging"==e.status||"arranged"==t._info.status){if(i.active=!1,a.active=!1,t._statesp.active=!1,1==e.isGrab)cc.loader.loadRes("niuniu/x"+e.QiangNum,cc.SpriteFrame,function(e,t){a.getComponent(cc.Sprite).spriteFrame=t}),a.active=!0,t._fangzhu.active=!0,o.active=!1;else if(e.baserate>0)o.getComponent(cc.Label).string="x"+e.baserate,o.active=!0}},setUserInfo:function(e){var t=this;if(t._info=e,0==this._isinit&&t.init(),null==t._info||null==t._info.status)this._state.active=!1,this._userInfo.active=!1;else{var i=t._state.getChildByName("ready"),n=t._statesp.getChildByName("beishu"),a=t._state.getChildByName("beishu"),o=t._state.getChildByName("rate");if(this._state.active=!1,t._info.isOnline){if(t._offline.active=!1,"ready"==t._info.status)this._state.active=!0,i.active=!0,n.active=!1,a.active=!1,o.active=!1,t._statesp.active=!1,t._fangzhu.active=!1;else if("qianged"==t._info.status)t._info.QiangNum>0?(cc.loader.loadRes("niuniu/qiangzhuang",cc.SpriteFrame,function(e,i){t._stateSpr.spriteFrame=i}),cc.loader.loadRes("niuniu/x"+t._info.QiangNum,cc.SpriteFrame,function(e,t){n.getComponent(cc.Sprite).spriteFrame=t}),n.active=!0):(cc.loader.loadRes("niuniu/nograb_icon",cc.SpriteFrame,function(e,i){t._stateSpr.spriteFrame=i}),n.active=!1),t._statesp.active=!0,t._state.active=!0,i.active=!1,a.active=!1,o.active=!1;else if("beishu"==t._info.status)1==t._info.isGrab?(0!=t._info.QiangNum&&void 0!=t._info.QiangNum||(t._info.QiangNum=1),cc.loader.loadRes("niuniu/x"+t._info.QiangNum,cc.SpriteFrame,function(e,t){a.getComponent(cc.Sprite).spriteFrame=t}),a.active=!0,t._state.active=!0,t._fangzhu.active=!0):t._state.active=!1,t._statesp.active=!1,i.active=!1,n.active=!1,o.active=!1;else if("beishued"==t._info.status||"arranging"==t._info.status||"arranged"==t._info.status)if(1==t._info.isGrab)0!=t._info.QiangNum&&void 0!=t._info.QiangNum||(t._info.QiangNum=1),cc.loader.loadRes("niuniu/x"+t._info.QiangNum,cc.SpriteFrame,function(e,t){a.getComponent(cc.Sprite).spriteFrame=t}),t._fangzhu.active=!0,a.active=!0,t._state.active=!0,t._statesp.active=!1,i.active=!1,n.active=!1,o.active=!1;else{if(t._info.baserate>0)o.getComponent(cc.Label).string="x"+t._info.baserate,o.active=!0,t._state.active=!0,a.active=!1;t._statesp.active=!1,i.active=!1,n.active=!1}}else t._offline.active=!0;if(this._userInfo.active=!0,null!=t._info.avatar&&void 0!=t._info.avatar){var c=t._info.avatar+"?aa=aa.jpg";cc.loader.load({url:c,type:"png"},function(e,i){i&&i.width>0&&(t._userIcon.spriteFrame=new cc.SpriteFrame(i,cc.Rect(0,0,i.width,i.height)))})}t._guanzhan.active=!1,"standup"!=t._info.status&&"ready"!=t._info.status||!t._info.isOnline||(cc.vv.gameNetMgr.getIsOpen()?t._guanzhan.active=!0:t._guanzhan.active=!1),0==t._info.isGrab||null==t._info.isGrab?t._fangzhu.active=!1:t._fangzhu.active=!0}this._userName&&null!==t._info&&null!==t._info.uid&&(this._userName.string=t._info.nickname,this._userScore.string=t._info.score+""),null!==t._info&&null!==t._info.isQiang&&1==t._info.isQiang&&t.onShowState("graber_icon")},onShowState:function(e,t){var i=this;if(t||(t=0),"wu"==e)return i._state.active=!1,void(i._statesp.active=!1);i._state.active=!0,i._statesp.active=!0;var n=i._state.getChildByName("rate"),a=i._state.getChildByName("win"),o=i._state.getChildByName("lose"),c=i._state.getChildByName("beishu"),s=i._state.getChildByName("ready");if(n.active=!1,a.active=!1,o.active=!1,s.active=!1,"ready"==e)return i._statesp.active=!1,cc.loader.loadRes("niuniu/"+e,cc.SpriteFrame,function(e,t){s.getComponent(cc.Sprite).spriteFrame=t}),void(s.active=!0);void 0!=c&&null!=c&&(c.active=!1);var r=i._statesp.getChildByName("beishu");t>0?(cc.loader.loadRes("niuniu/"+e,cc.SpriteFrame,function(e,t){i._stateSpr.spriteFrame=t}),cc.loader.loadRes("niuniu/x"+t,cc.SpriteFrame,function(e,t){r.getComponent(cc.Sprite).spriteFrame=t}),r.active=!0,void 0!=c&&null!=c&&(cc.loader.loadRes("niuniu/x"+t,cc.SpriteFrame,function(e,t){c.getComponent(cc.Sprite).spriteFrame=t}),c.active=!1)):(cc.loader.loadRes("niuniu/"+e,cc.SpriteFrame,function(e,t){i._stateSpr.spriteFrame=t}),void 0!=r&&null!=r&&(r.active=!1),void 0!=c&&null!=c&&(cc.loader.loadRes("niuniu/x1",cc.SpriteFrame,function(e,t){c.getComponent(cc.Sprite).spriteFrame=t}),c.active=!1))},setUserFrame:function(e){if(1==e){this._userFrame.active=!0,this._userFrame.opacity=255;var t=new Array,i=cc.scaleTo(.15,1.1),n=cc.scaleTo(.15,1),a=cc.fadeOut(.1);t.push(i),t.push(n),t.push(a);var o=cc.sequence(t);this._userFrame.runAction(o)}else this._userFrame.active=!1,this._userFrame.opacity=0},showFrameAction:function(){this._userFrame.stopAllActions(),this._userFrame.active=!0,this._userFrame.opacity=255;var e=new Array,t=cc.fadeIn(.1),i=cc.scaleTo(.4,1.3),n=cc.scaleTo(.4,1.05),a=cc.blink(.8,3),o=cc.fadeIn(.1);e.push(t),e.push(i),e.push(n),e.push(a),e.push(o);var c=cc.sequence(e);this._userFrame.runAction(c)},showZhuang:function(e){this._fangzhu.active=e},updateQiangStatus:function(){for(var e=this._state.getChildByName("beishu"),t=0;t<cc.vv.gameNetMgr.playerList.length;t++){var i=cc.vv.gameNetMgr.playerList[t];1==i.isGrab&&i.uid==this._info.uid&&void 0!=e&&null!=e&&(e.active=!0)}this._statesp.active=!1},getSeatUid:function(){return void 0==this._info||null==this._info?-1:this._info.uid},getUserIcon:function(){return this._userIcon.spriteFrame},onShowStateBNum:function(e,t){this._state.active=!0,this._statesp.active=!1;var i=this._state.getChildByName("rate"),n=this._state.getChildByName("win"),a=this._state.getChildByName("lose"),o=this._state.getChildByName("beishu"),c=this._state.getChildByName("ready");if(o.active=!1,c.active=!1,n.stopAllActions(),a.stopAllActions(),"rate"==t){i.active=!0,n.active=!1,a.active=!1,i.getComponent(cc.Label).string="x"+e}else{if(e>0)i.active=!1,n.active=!0,n.opacity=255,a.active=!1,n.getComponent(cc.Label).string="+"+Math.abs(e);else i.active=!1,n.active=!1,a.active=!0,a.opacity=255,a.getComponent(cc.Label).string="-"+Math.abs(e);var s=new Array,r=cc.moveBy(2,cc.v2(0,30)),l=cc.fadeOut(.1),u=cc.moveBy(.2,cc.v2(0,-30));s.push(r),s.push(l),s.push(u);var h=cc.sequence(s);e>0?n.runAction(h):a.runAction(h)}},updateScore:function(e){this._userScore.string=e+""},hideStatus:function(){this._state.active=!1},getIsZhuan:function(){return 1==this._fangzhu.active},update:function(e){if(null!=this._voicemsg&&!0===this._voicemsg.active&&Date.now()-this._voicetime>700&&this._voicetime>0){this._voicetime=Date.now();for(var t=0;t<this._adj.children.length;++t)this._adj.children[t].active=!1;this._adj.children[this._voicenum-1].active=!0,this._voicenum=this._voicenum-1,this._voicenum<=0&&(this._voicenum=3)}}}),cc._RF.pop()},{}],SettingUI:[function(e,t,i){"use strict";cc._RF.push(t,"b6e45Bv3H9FAJrJv6ilRwKz","SettingUI"),cc.Class({extends:cc.Component,properties:{soundSprite:cc.Sprite,effectSprite:cc.Sprite},onLoad:function(){this.initView()},initView:function(){var e=this,t=cc.sys.localStorage.getItem("bgmVolume"),i=cc.sys.localStorage.getItem("sfxVolume");0==t||null==t?cc.loader.loadRes("comm/onsetclose",cc.SpriteFrame,function(t,i){e.soundSprite.spriteFrame=i}):cc.loader.loadRes("comm/onsetopen",cc.SpriteFrame,function(t,i){e.soundSprite.spriteFrame=i}),0==i||null==i?cc.loader.loadRes("comm/onsetclose",cc.SpriteFrame,function(t,i){e.effectSprite.spriteFrame=i}):1==i&&cc.loader.loadRes("comm/onsetopen",cc.SpriteFrame,function(t,i){e.effectSprite.spriteFrame=i})},OnCloseClick:function(){this.node.removeFromParent()},OnSoundClick:function(){0==cc.sys.localStorage.getItem("bgmVolume")?cc.vv.audioMgr.setBGMVolume(.3):cc.vv.audioMgr.setBGMVolume(0),this.initView()},OnEffectClick:function(){0==cc.sys.localStorage.getItem("sfxVolume")?cc.vv.audioMgr.setSFXVolume(1):cc.vv.audioMgr.setSFXVolume(0),this.initView()}}),cc._RF.pop()},{}],Socket:[function(e,t,i){"use strict";cc._RF.push(t,"5349ay+m/ZJ84WTjxw3colC","Socket");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.io;cc.Class({extends:cc.Component,statics:{ip:"47.104.17.36:3000",sio:null,isPinging:!1,fnDisconnect:null,timeId:null,handlers:{},online:!0,addHandler:function(e,t){if(!this.handlers[e]){var i=function(i){"disconnect"!=e&&"string"==typeof i&&(i=JSON.parse(i)),t(i)};this.handlers[e]=i,this.sio&&this.sio.on(e,i)}},connect:function(e){var t=this,i=!1;for(var n in this.sio=window.io.connect(this.ip,{reconnect:!0,reconnectionAttempts:10,reconnectionDelay:1e3,reconnectionDelayMax:2e3,timeout:5e3,"force new connection":!0,"max reconnection attempts":10,transports:["websocket","polling"]}),this.sio.on("connecting",function(e){}),this.sio.on("connect",function(e){t.sio.connected=!0,i?cc.vv.gameNetMgr.dispatchEvent("reconnect_update",null):cc.vv.gameNetMgr.dispatchEvent("conect_success","conect success")}),this.sio.on("reconnecting",function(e){cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u6b63\u5728\u91cd\u8fde")}),this.sio.on("reconnect",function(e){cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u91cd\u8fde\u6210\u529f"),i=!0}),this.sio.on("connect_error",function(e){cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u91cd\u8fde\u5931\u8d25")}),this.sio.on("disconnect",function(e){t.sio.connected=!1,cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u5df2\u65ad\u5f00\u8fde\u63a5\uff0c\u8bf7\u91cd\u8fdb")}),this.sio.on("reconnect_failed",function(e){cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u91cd\u8fde\u5931\u8d25\uff0c\u8bf7\u91cd\u8fdb"),cc.vv.uitools.ShowAlert(cc.director.getScene(),"\u4f60\u5df2\u65ad\u5f00\u8fde\u63a5,\u8bf7\u91cd\u65b0\u8fde\u63a5",function(){window.parent.location.href=Grobal.hallUrl+"?uid="+cc.args.uid+"&roomNum="+cc.args.roomNum},!1)}),this.sio.on("connect_failed",function(){cc.vv.gameNetMgr.dispatchEvent("show_tips_message","\u8fde\u63a5\u5931\u8d25"),i=!0}),this.handlers){var a=this.handlers[n];"function"==typeof a&&("disconnect"==n?this.fnDisconnect=a:this.sio.on(n,a))}},send:function(e,t){this.sio&&this.sio.connected&&(null!=t&&"object"==(void 0===t?"undefined":n(t))&&(t=JSON.stringify(t)),this.sio.emit(e,t))},startHearbeat:function(){this.sio.on("game_pong",function(t){e.lastRecieveTime=Date.now(),e.delayMS=e.lastRecieveTime-e.lastSendTime,0==e.online&&(cc.vv.gameNetMgr.dispatchEvent("show_tips_message",null),cc.vv.gameNetMgr.dispatchEvent("reconnect_update",null)),e.online=!0}),this.lastRecieveTime=Date.now();var e=this;e.isPinging||(e.isPinging=!0,cc.game.on(cc.game.EVENT_HIDE,function(){e.ping()}),setInterval(function(){e.sio&&e.ping()}.bind(this),5e3),setInterval(function(){e.sio&&Date.now()-e.lastRecieveTime>2e4&&e.close()}.bind(this),500))},ping:function(){if(this.sio){var e=this.online;this.lastSendTime=Date.now(),this.send("game_ping",{isonline:e})}},close:function(){this.delayMS=null,this.sio&&this.sio.connected&&(this.sio.connected=!1,this.sio.disconnect(),this.sio=null),this.sio=null}}});cc._RF.pop()},{}],Time:[function(e,t,i){"use strict";cc._RF.push(t,"1e1a8aDeEhDXpCp2LDjN0b6","Time"),cc.Class({extends:cc.Component,properties:{_time:10,_args:null,_showtime:0,_eventName:null},onLoad:function(){},init:function(e){this.node.active=!1,this._args=e,this._time=this._args.time,this._showtime=Date.parse(new Date)/1e3,this.node.x=this._args.x,this.node.y=this._args.y,this._eventName=this._args.eventName,this.node.getChildByName("timelabel").getComponent(cc.Label).string=this._time,this.initView()},initView:function(){this.node.active=!0},hide:function(){this.node.removeFromParent()},update:function(){1==this.node.active&&this._showtime>0&&(this._time>0?Date.parse(new Date)/1e3>=this._showtime+1&&(this._showtime=Date.parse(new Date)/1e3,this._time=this._time-1,this._time<10&&(this._time=this._time),this.node.getChildByName("timelabel").getComponent(cc.Label).string=this._time):1==this.node.active&&null!=this._eventName&&(cc.vv.gameNetMgr.dispatchEvent(this._eventName),this.hide()))}}),cc._RF.pop()},{}],UI:[function(e,t,i){"use strict";cc._RF.push(t,"2715fKQJ0RIFoffVexShdnt","UI"),cc.Class({extends:cc.Component,properties:{},addClickEvent:function(e,t,i,n){var a=new cc.Component.EventHandler;a.target=t,a.component=i,a.handler=n,e.getComponent(cc.Button).clickEvents.push(a)},ShowAlert:function(e,t,i,n){cc.loader.loadRes("prefabs/AlertUI",function(a,o){var c=cc.instantiate(o);c.setPosition(cc.v2(0,0)),null!==e.getChildByName("Alert")&&e.removeChild(e.getChildByName("Alert")),e.addChild(c),c.getComponent("Alert").show(t,i,n)})},ShowAlert2:function(e,t,i,n,a,o,c){cc.loader.loadRes("prefabs/AlertUI2",function(s,r){var l=cc.instantiate(r);l.setPosition(cc.v2(0,0)),null!==e.getChildByName("AlertUI2")&&e.removeChild(e.getChildByName("AlertUI2")),e.addChild(l),l.getComponent("Alert").show2(t,i,n,a,o,c)})},ShowTips:function(e,t,i,n,a){cc.loader.loadRes("prefabs/TipsUI",function(i,o){var c=cc.instantiate(o);e.addChild(c),void 0===n&&void 0===a||c.setPosition(cc.v2(n,a)),c.getComponent("Tips").show(t)}),null!=i&&void 0!=i||(i=3e3),setTimeout(function(){null!==e.getChildByName("Tips")&&e.removeChild(e.getChildByName("Tips"))},i)},ShowLayer:function(e,t,i){cc.loader.loadRes("prefabs/"+e,function(n,a){var o=cc.instantiate(a);(t.addChild(o),i&&o.getComponent(e))&&o.getComponent(e).init(i)})},ShowTime:function(e,t,i){null!==t.getChildByName("Time")&&t.removeChild(t.getChildByName("Time")),cc.loader.loadRes("prefabs/"+e,function(n,a){var o=cc.instantiate(a);(null!==t.getChildByName("Time")&&t.removeChild(t.getChildByName("Time")),t.addChild(o),i&&o.getComponent(e))&&o.getComponent(e).init(i)})},ClearTime:function(e){null!==e.getChildByName("Time")&&e.removeChild(e.getChildByName("Time"))},ShowAnimation:function(e,t,i,n){cc.loader.loadRes("prefabs/Animations",function(a,o){var c=cc.instantiate(o);t.addChild(c),void 0!==i&&(void 0!==i.posx&&void 0!==i.posy&&c.setPosition(cc.v2(i.posx,i.posy)),void 0!==i.rotation&&(c.rotation=i.rotation),void 0!==i.scalex&&(c.scaleX=i.scalex));var s=c.getComponent("SpineAniCtrl");cc.loader.loadRes("animation/"+e,sp.SkeletonData,function(e,t){s.init(t,i,n)})})},ShowAniNui:function(e,t,i){cc.loader.loadRes("prefabs/Pokertype",function(n,a){var o=cc.instantiate(a);o.y=-20,t.addChild(o);var c=o.getComponent("PokerAct");o.getComponent(cc.Sprite);void 0!==i?o.setPosition(cc.v2(110,135)):t.x<0?o.setPosition(cc.v2(26,-45)):o.setPosition(cc.v2(0,-45)),cc.loader.loadRes("niuniu/bullfight_type"+e,cc.SpriteFrame,function(e,t){c.init(t)})})},ShowScoreAni:function(e){var t=new cc.Node;t.addComponent("ScoreAni"),cc.director.getScene().addChild(t),t.getComponent("ScoreAni").show(e,t)}}),cc._RF.pop()},{}],UserMgr:[function(e,t,i){"use strict";cc._RF.push(t,"e9915y0tNZBhqvASxLrrpS2","UserMgr"),cc.Class({extends:cc.Component,properties:{uid:null,nickname:null,avatar:null,houseCard:null,roomId:null,scene:null},login:function(){var e=this;cc.vv.gameNetMgr.connectGameServer(),cc.vv.netRoot.on("conect_success",function(e){cc.vv.socket.send("check_args",cc.args)},this),cc.vv.socket.addHandler("check_args_success",function(t){console.log("msg:"+JSON.stringify(t)),Grobal.uid=t.data.userInfo.uid,Grobal.roomNum=t.data.roomInfo.id;var i=JSON.parse(t.data.roomInfo.conf);Grobal.difen=i.difen,Grobal.beishu=i.beishu,Grobal.playerNum=t.data.roomInfo.max_player,e.uid=t.data.userInfo.uid,e.nickname=t.data.userInfo.nickname,e.avatar=t.data.userInfo.avatar,e.houseCard=t.data.userInfo.card,e.roomId=t.data.roomInfo.id,e.scene=t.data.roomInfo.code,cc.vv.userMgr.enterRoom()}),cc.vv.socket.addHandler("check_args_error",function(e){cc.vv.uitools.ShowAlert(cc.director.getScene(),e.msg,function(){window.parent.location=Grobal.hallUrl},!1)}),cc.vv.socket.addHandler("joinRoom",function(){cc.director.loadScene(e.scene)}),cc.vv.socket.addHandler("joinRoom_error",function(e){cc.vv.uitools.ShowAlert(cc.director.getScene(),e,function(){window.parent.location=Grobal.hallUrl},!1)})},enterRoom:function(){cc.vv.gameNetMgr.onRoomJoin(),cc.vv.socket.send("joinRoom")}}),cc._RF.pop()},{}],Voice:[function(e,t,i){"use strict";cc._RF.push(t,"19a3dEguhlEr7Dn9K1ADshi","Voice"),cc.Class({extends:cc.Component,properties:{_emoji:null,_chatBubble:null,_voicemsg:null,_adj:null,_voicetime:0,_voicenum:3,_lastChatTime:-1},onLoad:function(){this.init()},init:function(){this._chatBubble=this.node.getChildByName("ChatBubble"),this._emoji=this.node.getChildByName("emoji"),this._voicemsg=this.node.getChildByName("voicemsg"),null!=this._voicemsg&&(this._adj=this._voicemsg.getChildByName("adj"),this._voicemsg.active=!1),this._chatBubble.active=!1,this._emoji.active=!1},voiceMsg:function(e){this._voicemsg&&(this._voicemsg.active=e,!0===e?(this._voicenum=3,this._voicetime=Date.now()):this._voicetime=0)},chat:function(e){null!=this._chatBubble&&null!=e&&(this._emoji.active=!1,this._chatBubble.active=!0,this._chatBubble.getChildByName("message").getComponent(cc.Label).string=e,this._chatBubble.getChildByName("chatbubble_bg").width=this._chatBubble.getChildByName("message").width+35,this._lastChatTime=3)},emoji:function(e){null!=this._emoji&&null!=e&&(this._chatBubble.active=!1,this._emoji.active=!0,this._emoji.getComponent(cc.Animation).play(e),this._lastChatTime=3)},update:function(e){if(this._lastChatTime>0&&(this._lastChatTime-=e,this._lastChatTime<0&&(this._chatBubble.active=!1,this._emoji.active=!1,this._emoji.getComponent(cc.Animation).stop())),null!=this._voicemsg&&!0===this._voicemsg.active&&Date.now()-this._voicetime>700&&this._voicetime>0){this._voicetime=Date.now();for(var t=0;t<this._adj.children.length;++t)this._adj.children[t].active=!1;this._adj.children[this._voicenum-1].active=!0,this._voicenum=this._voicenum-1,this._voicenum<=0&&(this._voicenum=3)}}}),cc._RF.pop()},{}]},{},["Alert","Card","ClickAndRemove","GameFinishUI","PokerAct","Rule","Score","ScoreAni","Seat","SeatControl","SettingUI","Time","UI","Voice","Control","Game","GamePlay","Loading","AudioMgr","GameNetMgr","Root","UserMgr","Chat","ChatList","HTTP","Socket"]);